# Database Migrations

This directory contains database migration scripts managed by Alembic.

## Directory Structure

- `versions/` - Contains individual migration scripts
- `env.py` - Alembic environment configuration
- `script.py.mako` - Template for migration scripts

## Usage

### Creating a New Migration

To create a new migration after making changes to the models:

```bash
cd backend
alembic revision --autogenerate -m "Description of the changes"
```

This will generate a new migration script in the `versions/` directory.

### Applying Migrations

To apply all pending migrations:

```bash
alembic upgrade head
```

To apply migrations up to a specific revision:

```bash
alembic upgrade <revision_id>
```

### Rolling Back Migrations

To roll back the most recent migration:

```bash
alembic downgrade -1
```

To roll back to a specific revision:

```bash
alembic downgrade <revision_id>
```

### Checking Migration Status

To see the current migration status:

```bash
alembic current
```

To see the history of migrations:

```bash
alembic history
```

## Best Practices

1. Always review auto-generated migrations before applying them
2. Run tests after applying migrations to ensure everything works
3. Keep migrations small and focused on specific changes
4. Include descriptive messages when creating migrations 